<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Reporte de Supervisi칩n</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
		<style>
			/* Estilo general para body */
			body {
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
			background-color: #f9f9f9;
			color: #333;
			display: flex;
			flex-direction: column;
			align-items: center;
			min-height: 100vh;
			}
			/* Header */
			.header {
			background-color: #007BFF;
			color: white;
			text-align: center;
			padding: 15px;
			width: 100%;
			font-size: 1.5em;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			}
			/* Contenedor del formulario */
			.container {
			background: #fff;
			padding: 30px;
			border-radius: 10px;
			width: 100%;
			max-width: 600px;
			box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
			margin-top: 20px;
			}
			/* Mejoras para pantallas peque침as */
			@media (max-width: 768px) {
			.header {
			font-size: 1.2em;
			padding: 15px;
			}
			.container {
			padding: 20px;
			}
			.container input,
			.container button {
			font-size: 1em;
			padding: 12px;
			width: 100%;
			}
			}
			/* Contenedor del formulario */
			.container {
			background: #ffffff;
			box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
			border-radius: 10px;
			padding: 30px;
			width: 90%;
			max-width: 600px;
			text-align: center;
			margin: 40px auto;
			grid-row: 2;
			height: auto;
			box-sizing: border-box;
			}
			/* Mejoras para pantallas peque침as (m칩viles) */
			@media (max-width: 768px) {
			.container {
			width: 100%;
			max-width: none;
			margin: 20px 0;
			padding: 20px;
			}
			.container input,
			.container button {
			font-size: 1em;
			padding: 10px;
			width: 100%;
			}
			body {
			padding: 0 10px;
			}
			}
			/* Estilo para los botones dentro del contenedor */
			.container button {
			display: inline-block;
			margin-top: 20px;
			background-color: #007BFF;
			color: white;
			border: 2px solid #007BFF;
			padding: 10px 20px;
			border-radius: 5px;
			font-size: 16px;
			cursor: pointer;
			transition: background-color 0.3s, border-color 0.3s;
			}
			/* Botones en pantallas peque침as */
			@media (max-width: 768px) {
			.container button {
			width: auto;
			display: inline-block;
			margin-right: 10px;
			}
			}
			/* Centrado de los botones */
			.container .button-container {
			display: flex;
			justify-content: center;
			gap: 10px;
			flex-wrap: wrap;
			}
			/* Estilos para el 치rea de arrastrar y soltar */
			.file-drop-area {
			border: 2px dashed #007BFF;
			border-radius: 10px;
			padding: 40px 20px;
			text-align: center;
			cursor: pointer;
			font-size: 16px;
			background-color: #f0f8ff;
			color: #007BFF;
			transition: background-color 0.3s ease, border-color 0.3s ease;
			margin: 10px 0;
			}
			.file-drop-area.dragover {
			background-color: #e6f7ff;
			border-color: #0056b3;
			}
			.file-drop-area:hover {
			background-color: #e6f7ff;
			border-color: #0056b3;
			}
			/* Ocultar el input file real */
			input[type="file"] {
			display: none;
			}
			/* Vista previa de las im치genes */
			#preview {
			display: flex;
			flex-wrap: wrap;
			justify-content: center;
			gap: 10px;
			margin: 20px 0;
			max-height: 300px;
			overflow-y: auto;
			}
			#preview .image-container {
			position: relative;
			display: inline-block;
			margin: 10px;
			cursor: pointer;
			}
			#preview img {
			max-width: 150px;
			max-height: 150px;
			margin: 0;
			border: 2px solid #ddd;
			border-radius: 8px;
			transition: transform 0.3s, filter 0.3s;
			}
			#preview img:hover {
			filter: brightness(0.8);
			transform: scale(1.05);
			}
			.delete-trash {
			position: absolute;
			top: 10px;
			left: 10px;
			font-size: 30px;
			color: red;
			display: none;
			transition: opacity 0.3s;
			}
			#preview .image-container:hover .delete-trash {
			display: block;
			opacity: 1;
			}
			/* Estilos generales de los botones */
			button {
			background-color: #007BFF;
			color: white;
			border: 2px solid #007BFF;
			padding: 10px 20px;
			border-radius: 5px;
			font-size: 16px;
			cursor: pointer;
			transition: background-color 0.3s, border-color 0.3s;
			margin-top: 20px;
			width: auto;
			}
			button:disabled {
			background-color: #ccc;
			cursor: not-allowed;
			border-color: #ccc;
			}
			button:hover:not(:disabled) {
			background-color: #0056b3;
			border-color: #0056b3;
			}
			/* Estilo para el campo .file-label */
			.file-label {
			display: inline-block;
			padding: 10px 20px;
			background-color: #007BFF;
			color: white;
			border-radius: 5px;
			cursor: pointer;
			transition: background-color 0.3s;
			}
			.file-label:hover {
			background-color: #0056b3;
			}
			input[type="file"] {
			display: none;
			}
			/* Estilo para los contenedores de preguntas */
			.question-container {
			margin-bottom: 20px;
			text-align: left;
			padding: 10px;
			border: 2px solid #ccc;
			border-radius: 5px;
			background-color: #f9f9f9;
			transition: border-color 0.3s;
			box-sizing: border-box;
			}
			.question-container:hover {
			border-color: #007BFF;
			}
			.question-container input[type="date"],
			.question-container textarea,
			.question-container select {
			padding: 10px;
			border: 2px solid #ccc;
			border-radius: 5px;
			width: 100%;
			font-size: 16px;
			background-color: #f9f9f9;
			color: #333;
			transition: border-color 0.3s;
			box-sizing: border-box;
			margin-top: 5px;
			}
			.question-container input[type="date"]:focus,
			.question-container textarea:focus,
			.question-container select:focus {
			border-color: #007BFF;
			outline: none;
			}
			/* Estilos espec칤ficos para el campo select */
			.question-container select {
			font-size: 16px;
			padding: 10px;
			}
			/* Estilos de las etiquetas */
			.question-container label {
			font-weight: bold;
			font-size: 16px;
			margin-bottom: 5px;
			display: block;
			}
			/* Medidas responsivas */
			@media (max-width: 768px) {
			.question-container {
			padding: 15px;
			margin-bottom: 15px;
			}
			.question-container input[type="date"],
			.question-container textarea,
			.question-container select {
			font-size: 14px;
			padding: 8px;
			}
			.question-container label {
			font-size: 18px;
			}
			}
			/* Estilos para la secci칩n "oficina" */
			#oficina {
			padding: 10px;
			border: 2px solid #ccc;
			border-radius: 5px;
			width: 100%;
			font-size: 16px;
			background-color: #f9f9f9;
			color: #333;
			transition: border-color 0.3s;
			resize: vertical;
			box-sizing: border-box;
			}
			#oficina:focus {
			border-color: #007BFF;
			outline: none;
			}
			/* Estilo para el textarea con id "medidas" */
			#medidas {
			padding: 20px;
			border: 2px solid #ccc;
			border-radius: 5px;
			width: 100%;
			font-size: 16px;
			background-color: #f9f9f9;
			color: #333;
			transition: border-color 0.3s;
			resize: vertical;
			box-sizing: border-box;
			height: 250px;
			}
			/* Estilo para el bot칩n "Volver al Inicio" */
			.back-button {
			display: inline-block;
			padding: 10px 20px;
			background-color: #007BFF;
			color: white;
			border-radius: 5px;
			text-decoration: none;
			text-align: center;
			font-size: 1em;
			transition: background-color 0.3s, transform 0.3s;
			position: fixed;
			top: 80px;
			left: 0px;
			z-index: 1001;
			}
			.back-button:hover {
			background-color: #0056b3;
			transform: scale(1.05);
			}
			/* Estilo adicional para dispositivos m칩viles */
			@media screen and (max-width: 600px) {
			.back-button {
			font-size: 0.9em;
			padding: 12px 18px;
			top: 57px;
			}
			}
			/* Secci칩n adicional */
			.form-section {
			margin-top: 40px;
			padding-top: 20px;
			border-top: 2px solid #f4f4f9;
			}
			/* Ocultar elementos */
			.hidden {
			display: none;
			}
			/* Estilo del overlay (pantalla bloqueada) */
			#overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.5);  /* Fondo semitransparente */
			display: flex;
			justify-content: center;
			align-items: center;
			z-index: 9999;  /* Aseg칰rate de que est칠 por encima de otros elementos */
			}
			#loadingMessage {
			color: white;  /* Texto en blanco */
			font-size: 24px;  /* Tama침o de fuente para que se vea bien */
			font-family: 'Times New Roman', Times, serif;  /* Fuente Times New Roman */
			text-align: center;
			padding: 20px;  /* Espaciado interno */
			}
		</style>
	</head>
	<body>
		<div class="header">
			Pisos Brillantes
		</div>
		<!-- El bot칩n "Volver al Inicio" ahora est치 fuera del iframe-container para que siempre sea visible -->
		<a href="javascript:void(0);" class="back-button" onclick="goBack()">Volver al Inicio</a>
		<div class="container">
			<h1>Reporte de Supervisi칩n de 츼reas</h1>
			<!-- P치gina 0: Ingreso de Fecha y 츼rea -->
			<div id="page0">
				<div class="question-container">
					<label for="fecha">Fecha:</label>
					<input type="date" id="fecha" value="" />
				</div>
				<div class="question-container">
					<label for="area">츼rea:</label>
					<select id="area">
						<option value="Selecciona una opci칩n">Selecciona una opci칩n</option>
						<option value="Administraci칩n">Administraci칩n</option>
						<option value="Almac칠n General">Almac칠n General</option>
						<option value="Ba침os de Administraci칩n (Hombres)">Ba침os de Administraci칩n (Hombres)</option>
						<option value="Ba침os de Administraci칩n (Mujeres)">Ba침os de Administraci칩n (Mujeres)</option>
						<option value="Ba침os de Transportistas">Ba침os de Transportistas</option>
						<option value="Bodega de Limpieza">Bodega de Limpieza</option>
						<option value="Camerinos Contratistas">Camerinos Contratistas</option>
						<option value="Camerinos Permanentes">Camerinos Permanentes</option>
						<option value="Chiminike">Chiminike</option>
						<option value="Club de Argos">Club de Argos</option>
						<option value="Despacho">Despacho</option>
						<option value="Enfermer칤a">Enfermer칤a</option>
						<option value="Equipo M칩vil">Equipo M칩vil</option>
						<option value="Expedici칩n">Expedici칩n</option>
						<option value="Laboratorio de Calidad">Laboratorio de Calidad</option>
						<option value="Laboratorio de Concreto">Laboratorio de Concreto</option>
						<option value="Machaqueo A">Machaqueo A</option>
						<option value="Posta Principal">Posta Principal</option>
						<option value="Sala de Control">Sala de Control</option>
						<option value="Sala de Maternidad">Sala de Maternidad</option>
						<option value="Sal칩n Vial">Sal칩n Vial</option>
						<option value="Taller El칠ctrico">Taller El칠ctrico</option>
					</select>
				</div>
				<button id="next0">Siguiente</button>
			</div>
			<!-- P치gina 1: Calificaci칩n de Oficinas -->
			<div id="page1" class="hidden">
				<div class="question-container">
					<label for="calificarOficinas">쮻eseas calificar las Oficinas?</label>
					<select id="calificarOficinas">
						<option value="">Selecciona una opci칩n</option>
						<option value="S칤">S칤</option>
						<option value="No">No</option>
					</select>
				</div>
				<div id="questionsSectionOficinas" style="display: none;">
					<!-- Casilla "Nombre de Oficina" que estar치 oculta por defecto -->
					<div id="oficinaAdministracion" class="question-container" style="display: none;">
						<label for="oficina">Oficina de Administraci칩n:</label>
						<input type="text" id="oficina" placeholder="Especifica la oficina" />
					</div>
					<!-- Preguntas generadas din치micamente para oficinas -->
				</div>
				<button id="back0">Atr치s</button>
				<button id="next1">Siguiente</button>
			</div>
			<!-- P치gina 2: Calificaci칩n de Pasillos -->
			<div id="page2" class="hidden">
				<div class="question-container">
					<label for="calificarPasillos">쮻eseas calificar los Pasillos?</label>
					<select id="calificarPasillos">
						<option value="">Selecciona una opci칩n</option>
						<option value="S칤">S칤</option>
						<option value="No">No</option>
					</select>
				</div>
				<div id="questionsSectionPasillos" style="display: none;">
					<!-- Preguntas generadas din치micamente para pasillos -->
				</div>
				<button id="back1">Atr치s</button>
				<button id="next2">Siguiente</button>
			</div>
			<!-- P치gina 3: Calificaci칩n de Food Court / 츼rea de Comida -->
			<div id="page3" class="hidden">
				<div class="question-container">
					<label for="calificarFood">쮻eseas calificar el Food Court / 츼rea de Comida?</label>
					<select id="calificarFood">
						<option value="">Selecciona una opci칩n</option>
						<option value="S칤">S칤</option>
						<option value="No">No</option>
					</select>
				</div>
				<div id="questionsSectionFood" style="display: none;">
					<!-- Preguntas generadas din치micamente para Food Court / 츼rea de Comida -->
				</div>
				<button id="back2">Atr치s</button>
				<button id="next3">Siguiente</button>
			</div>
			<!-- P치gina 4: Calificaci칩n de Ba침os -->
			<div id="page4" class="hidden">
				<div class="question-container">
					<label for="calificarBano">쮻eseas calificar los Ba침os?</label>
					<select id="calificarBano">
						<option value="">Selecciona una opci칩n</option>
						<option value="S칤">S칤</option>
						<option value="No">No</option>
					</select>
				</div>
				<div id="questionsSectionBano" style="display: none;">
					<!-- Preguntas generadas din치micamente para Ba침os -->
				</div>
				<button id="back3">Atr치s</button>
				<button id="next4">Siguiente</button>
			</div>
			<!-- P치gina 5: Calificaci칩n de Alrededores -->
			<div id="page5" class="hidden">
				<div class="question-container">
					<label for="calificarAlrededor">쮻eseas calificar los Alrededores?</label>
					<select id="calificarAlrededor">
						<option value="">Selecciona una opci칩n</option>
						<option value="S칤">S칤</option>
						<option value="No">No</option>
					</select>
				</div>
				<div id="questionsSectionAlrededor" style="display: none;">
					<!-- Preguntas generadas din치micamente para Alrededores -->
				</div>
				<button id="back4">Atr치s</button>
				<button id="next5">Siguiente</button>
			</div>
			<!-- P치gina 6: Calificaci칩n de Buenas Pr치cticas -->
			<div id="page6" class="hidden">
				<div class="question-container">
					<label for="calificarPractica">쮻eseas calificar las Buenas Pr치cticas?</label>
					<select id="calificarPractica">
						<option value="">Selecciona una opci칩n</option>
						<option value="S칤">S칤</option>
						<option value="No">No</option>
					</select>
				</div>
				<div id="questionsSectionPractica" style="display: none;">
					<!-- Preguntas generadas din치micamente para las buenas pr치cticas -->
				</div>
				<button id="back5">Atr치s</button>
				<button id="next6">Siguiente</button>
			</div>
			<!-- P치gina 7: Comentarios -->
			<div id="page7" class="hidden">
				<div class="question-container">
					<label for="medidas">쯈u칠 medidas se tomaron en caso de una no conformidad?</label>
					<textarea id="medidas" rows="4" cols="50" placeholder="Escribe aqu칤 tus comentarios..."></textarea>
				</div>
				<button id="back6">Atr치s</button>
				<button id="next7">Siguiente</button>
			</div>
			<!-- P치gina X: Subir im치genes y Descargar PDF -->
			<div id="pageX" class="hidden">
				<div class="form-section">
					<!-- Contenedor para simular el bot칩n de arrastrar y soltar -->
					<div class="file-drop-area" id="fileDropArea">
						<p>Haz clic para seleccionar las im치genes</p>
						<input type="file" id="imageInput" accept="image/*" multiple>
					</div>
					<div id="preview"></div>
					<div class="button-container">
						<button id="backX">Atr치s</button>
						<button type="button" id="downloadPdf">Generar Reporte</button>
					</div>
				</div>
				<!-- Contenedor para bloquear la pantalla -->
				<div id="overlay" style="display: none;">
					<div id="loadingMessage">
						<p>Procesando...游봄</p>
					</div>
				</div>
			</div>
		</div>
		<script>
			function goBack() {
			    window.history.back();  // Esto hace que el navegador vuelva a la p치gina anterior
			}
			
			// Establecer la fecha actual por defecto
			window.onload = function() {
			    const fechaInput = document.getElementById("fecha");
			    const today = new Date();
			    const yyyy = today.getFullYear();
			    let mm = today.getMonth() + 1; // Los meses van de 0 a 11
			    let dd = today.getDate();
			
			    // Formatear la fecha a formato YYYY-MM-DD
			    if (mm < 10) mm = '0' + mm;
			    if (dd < 10) dd = '0' + dd;
			
			    const formattedDate = yyyy + '-' + mm + '-' + dd;
			    fechaInput.value = formattedDate;
			};
			
			const dropArea = document.getElementById('fileDropArea'); // El 치rea para arrastrar y soltar
			const fileInput = document.getElementById('imageInput'); // El input file real
			const previewDiv = document.getElementById('preview'); // Div para vista previa de las im치genes
			
			// Cuando un archivo est치 sobre el 치rea (evitar comportamiento predeterminado del navegador)
			dropArea.addEventListener('dragover', (e) => {
			    e.preventDefault(); // Prevenir el comportamiento por defecto (abrir el archivo)
			    dropArea.classList.add('dragover'); // Cambiar el estilo cuando se arrastra un archivo
			});
			
			// Cuando el archivo se deja dentro del 치rea
			dropArea.addEventListener('drop', (e) => {
			    e.preventDefault(); // Prevenir el comportamiento por defecto
			    dropArea.classList.remove('dragover'); // Eliminar la clase de estilo cuando se deja el archivo
			
			    const files = e.dataTransfer.files; // Obtener los archivos arrastrados
			    handleFiles(files); // Manejar los archivos arrastrados
			});
			
			// Si el archivo sale del 치rea sin ser soltado
			dropArea.addEventListener('dragleave', () => {
			    dropArea.classList.remove('dragover'); // Eliminar la clase de estilo cuando el archivo sale del 치rea
			});
			
			// Cuando se hace clic en el 치rea de arrastre, abrir el input file
			dropArea.addEventListener('click', () => {
			fileInput.click(); // Abrir el cuadro de selecci칩n de archivo
			});
			
			// Cuando el input file cambia (selecci칩n manual de archivos)
			fileInput.addEventListener('change', () => {
			const files = fileInput.files;
			handleFiles(files); // Manejar los archivos seleccionados
			});
			
			// Funci칩n para manejar los archivos (tanto arrastrados como seleccionados)
			function handleFiles(files) {
			previewDiv.innerHTML = ''; // Limpiar la vista previa antes de mostrar nuevas im치genes
			
			// Mostrar miniaturas de las im치genes seleccionadas
			Array.from(files).forEach(file => {
			    const img = document.createElement('img');
			    img.src = URL.createObjectURL(file); // Crear una URL temporal para mostrar la imagen
			    previewDiv.appendChild(img); // A침adir la imagen al contenedor de vista previa
			});
			}
			
			
			
			
			// Obtener el select y la casilla de "Oficina de Administraci칩n"
			const areaSelect = document.getElementById('area');
			const oficinaAdministracionDiv = document.getElementById('oficinaAdministracion');
			
			// A침adir un evento para detectar el cambio en el select
			areaSelect.addEventListener('change', () => {
			    if (areaSelect.value === 'Administraci칩n') {
			        // Mostrar la casilla de Oficina de Administraci칩n si se selecciona "Administraci칩n"
			        oficinaAdministracionDiv.style.display = 'block';
			    } else {
			        // Ocultar la casilla de Oficina de Administraci칩n si se selecciona cualquier otra opci칩n
			        oficinaAdministracionDiv.style.display = 'none';
			    }
			});
			
			
			
			
			    const questionsOficinas = [
			        { id: 'question1', text: '쯉e observa presencia de telas de ara침a?', options: ['S칤', 'No'] },
			        { id: 'question2', text: '쯃os escritorios, mesas, estantes, archiveros y dem치s superficies de trabajo est치n limpios?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question3', text: '쯃os dispositivos electr칩nicos compartidos (tel칠fonos, teclados, computadoras y otros) est치n limpios?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question4', text: '쯃as superficies de contacto frecuente (manijas, interruptores, pasamanos) est치n limpias y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question5', text: '쮼l oasis se encuentra limpio y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question6', text: '쮼l microondas se encuentra limpio y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question7', text: '쯃as cafeteras se encuentra limpias y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question8', text: '쯃as refrigeradoras se encuentra limpias y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question9', text: '쯃as ventanas y dem치s vidrios se encuentran limpios?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question10', text: '쯃as puertas se encuentran limpias y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question11', text: '쯃as sillas est치n limpias (Sin polvo y patas limpias)?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question12', text: '쮼l piso est치 limpio y sin manchas visibles?', options: ['S칤', 'No'] },
			        { id: 'question13', text: '쯃os basureros se encuentran limpios y con su respectiva bolsa de basura?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question14', text: '쯃os dispensadores (papel toalla, jab칩n, gel) est치n limpios, abastecidos y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question15', text: '쮼l 치rea se encuentra aromatizada?', options: ['S칤', 'No'] },
			    ];
			
			    const questionsPasillos = [
			        { id: 'question16', text: '쯉e observa presencia de telas de ara침a?', options: ['S칤', 'No'] },
			        { id: 'question17', text: '쯃as superficies de contacto frecuente (manijas, interruptores, pasamanos) est치n limpias y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question18', text: '쯃as ventanas y dem치s vidrios se encuentran limpios?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question19', text: '쯃os extintores se encuentran limpios?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question20', text: '쮼l piso est치 limpio y sin manchas visibles?', options: ['S칤', 'No'] },
			        { id: 'question21', text: '쯃os basureros se encuentran limpios y con su respectiva bolsa de basura?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question22', text: '쯃os dispensadores (papel toalla, jab칩n, gel) est치n limpios, abastecidos y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question23', text: '쯃as cafeteras se encuentra limpias y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question24', text: '쮼l 치rea se encuentra aromatizada?', options: ['S칤', 'No'] },
			    ];
			
			    const questionsFood = [
			        { id: 'question25', text: '쯉e observa presencia de telas de ara침a?', options: ['S칤', 'No'] },
			        { id: 'question26', text: '쯃as superficies de contacto frecuente (manijas, interruptores, pasamanos) est치n limpias y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question27', text: '쮼l oasis se encuentra limpio y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question28', text: '쮼l microondas se encuentra limpio y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question29', text: '쯃as cafeteras se encuentra limpias y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question30', text: '쯃as refrigeradoras se encuentra limpias y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question31', text: '쯃as ventanas y dem치s vidrios se encuentran limpios?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question32', text: '쯃as sillas est치n limpias (Sin polvo y patas limpias)?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question33', text: '쯃as mesas est치n limpias?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question34', text: '쮼l piso est치 limpio y sin manchas visible?', options: ['S칤', 'No'] },
			        { id: 'question35', text: '쯃os basureros se encuentran limpios y con su respectiva bolsa de basura?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question36', text: '쯃os dispensadores (papel toalla, jab칩n, gel) est치n limpios, abastecidos y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question37', text: '쮼l 치rea se encuentra aromatizada?', options: ['S칤', 'No'] },
			
			    ];
			
			    const questionsBano = [
			        { id: 'question38', text: '쮼l 치rea se encuentra aromatizada?', options: ['S칤', 'No'] },
			        { id: 'question39', text: '쯉e observa presencia de telas de ara침a?', options: ['S칤', 'No'] },
			        { id: 'question40', text: '쯃os pisos est치n limpios?', options: ['S칤', 'No'] },
			        { id: 'question41', text: '쯃as ventanas y dem치s vidrios se encuentran limpios?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question42', text: '쯃as paredes se encuentran limpias y sin manchas visibles?', options: ['S칤', 'No'] },
			        { id: 'question43', text: '쯃as puertas se encuentran limpias y sin manchas visibles?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question44', text: '쯃as divisiones (puertas / acr칤licos, etc) se encuentran limpias y sin manchas visibles?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question45', text: '쯃os lavamanos est치n limpios, libres de sarro y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question46', text: '쯃os espejos est치n limpios y sin presencia de manchas?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question47', text: '쯃os sanitarios est치n limpios, libres de sarro y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question48', text: '쯃os urinarios est치n limpios, libres de sarro y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question49', text: '쯃as duchas est치n limpias, libres de sarro y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question50', text: '쯃os basureros se encuentran limpios y con su respectiva bolsa de basura?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question51', text: '쯃os dispensadores (papel toalla, jab칩n, gel) est치n limpios, abastecidos y en funcionamiento?', options: ['S칤', 'No', 'N/A'] },
			
			
			    ];
			
			    const questionsAlrededor = [
			        { id: 'question52', text: '쯃as 치reas exteriores, incluyendo aceras, entradas se encuentran limpias?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question53', text: '쯃as pilas / piletas se encuentran limpias y en buen estado?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question54', text: '쮿ay presencia de basura, hojas u otros desechos en el suelo?', options: ['S칤', 'No'] },
			        { id: 'question55', text: '쯃os contenedores de basura est치n saturados de basura?', options: ['S칤', 'No', 'N/A'] },
			        { id: 'question56', text: '쯃as paredes se encuentran limpias y sin manchas visibles?', options: ['S칤', 'No'] },
			        { id: 'question57', text: '쯃as ventanas y dem치s vidrios se encuentran limpios?', options: ['S칤', 'No', 'N/A'] },
			
			    ];
			
			    const questionsPractica = [
			        { id: 'question58', text: '쮼l personal est치 cumpliendo con la ejecuci칩n y el llenado de los reportes diarios en 치reas y ba침os?', options: ['S칤', 'No'] },
			        { id: 'question59', text: '쮼l personal asignado est치 haciendo buen uso del equipo de protecci칩n?', options: ['S칤', 'No'] },
			        { id: 'question60', text: '쮼l personal asignado est치 utilizando correctamente el r칩tulo de "Limpieza en progreso" durante sus actividades?', options: ['S칤', 'No'] },
			        { id: 'question61', text: '쯉e respeta la codificaci칩n de colores en los pa침os de microfibra para evitar la contaminaci칩n cruzada?', options: ['S칤', 'No'] },
			        { id: 'question62', text: '쯉e respeta la codificaci칩n de colores en las mechas de trapeador para evitar la contaminaci칩n cruzada?', options: ['S칤', 'No'] },
			        { id: 'question63', text: '쮼l personal asignado est치 utilizando adecuadamente las herramientas de limpieza durante su manipulaci칩n?', options: ['S칤', 'No'] },
			        { id: 'question64', text: '쮼l personal asignado est치 utilizando los productos qu칤micos de forma segura?', options: ['S칤', 'No'] },
			        { id: 'question65', text: '쯉e almacena correctamente el equipo de limpieza, ordenado y sin restos de suciedad?', options: ['S칤', 'No'] },
			        { id: 'question66', text: '쮿ay alguna herramienta que muestre signos de deterioro o desgaste que puedan afectar su funcionamiento?', options: ['S칤', 'No'] },
			        { id: 'question67', text: '쯊odas las herramientas cuentan con un etiquetado claro y legible que facilite su identificaci칩n?', options: ['S칤', 'No'] },
			
			    ];
			
			
			
			
			    const questionsSectionOficinas = document.getElementById('questionsSectionOficinas');
			    const questionsSectionPasillos = document.getElementById('questionsSectionPasillos');
			    const questionsSectionFood = document.getElementById('questionsSectionFood');
			    const questionsSectionBano = document.getElementById('questionsSectionBano');
			    const questionsSectionAlrededor = document.getElementById('questionsSectionAlrededor');
			    const questionsSectionPractica = document.getElementById('questionsSectionPractica');
			
			
			
			
			    // Generar preguntas din치micamente para oficinas
			    questionsOficinas.forEach((q) => {
			        const questionContainer = document.createElement('div');
			        questionContainer.classList.add('question-container');
			        const label = document.createElement('label');
			        label.setAttribute('for', q.id);
			        label.textContent = q.text;
			        questionContainer.appendChild(label);
			
			        const select = document.createElement('select');
			        select.id = q.id;
			        select.name = q.id;
			        select.innerHTML = '<option value="">Selecciona una opci칩n</option>' + q.options.map(option => `<option value="${option}">${option}</option>`).join('');
			        questionContainer.appendChild(select);
			
			        questionsSectionOficinas.appendChild(questionContainer);
			    });
			
			    // Generar preguntas din치micamente para pasillos
			    questionsPasillos.forEach((q) => {
			        const questionContainer = document.createElement('div');
			        questionContainer.classList.add('question-container');
			        const label = document.createElement('label');
			        label.setAttribute('for', q.id);
			        label.textContent = q.text;
			        questionContainer.appendChild(label);
			
			        const select = document.createElement('select');
			        select.id = q.id;
			        select.name = q.id;
			        select.innerHTML = '<option value="">Selecciona una opci칩n</option>' + q.options.map(option => `<option value="${option}">${option}</option>`).join('');
			        questionContainer.appendChild(select);
			
			        questionsSectionPasillos.appendChild(questionContainer);
			    });
			
			    // Generar preguntas din치micamente para Food Court / 츼rea de Comida
			    questionsFood.forEach((q) => {
			        const questionContainer = document.createElement('div');
			        questionContainer.classList.add('question-container');
			        const label = document.createElement('label');
			        label.setAttribute('for', q.id);
			        label.textContent = q.text;
			        questionContainer.appendChild(label);
			
			        const select = document.createElement('select');
			        select.id = q.id;
			        select.name = q.id;
			        select.innerHTML = '<option value="">Selecciona una opci칩n</option>' + q.options.map(option => `<option value="${option}">${option}</option>`).join('');
			        questionContainer.appendChild(select);
			
			        questionsSectionFood.appendChild(questionContainer);
			    });
			
			    // Generar preguntas din치micamente para Ba침os
			    questionsBano.forEach((q) => {
			        const questionContainer = document.createElement('div');
			        questionContainer.classList.add('question-container');
			        const label = document.createElement('label');
			        label.setAttribute('for', q.id);
			        label.textContent = q.text;
			        questionContainer.appendChild(label);
			
			        const select = document.createElement('select');
			        select.id = q.id;
			        select.name = q.id;
			        select.innerHTML = '<option value="">Selecciona una opci칩n</option>' + q.options.map(option => `<option value="${option}">${option}</option>`).join('');
			        questionContainer.appendChild(select);
			
			        questionsSectionBano.appendChild(questionContainer);
			    });
			
			    // Generar preguntas din치micamente para Alrededores
			    questionsAlrededor.forEach((q) => {
			        const questionContainer = document.createElement('div');
			        questionContainer.classList.add('question-container');
			        const label = document.createElement('label');
			        label.setAttribute('for', q.id);
			        label.textContent = q.text;
			        questionContainer.appendChild(label);
			
			        const select = document.createElement('select');
			        select.id = q.id;
			        select.name = q.id;
			        select.innerHTML = '<option value="">Selecciona una opci칩n</option>' + q.options.map(option => `<option value="${option}">${option}</option>`).join('');
			        questionContainer.appendChild(select);
			
			        questionsSectionAlrededor.appendChild(questionContainer);
			    });
			
			    // Generar preguntas din치micamente para las buenas pr치cticas
			    questionsPractica.forEach((q) => {
			        const questionContainer = document.createElement('div');
			        questionContainer.classList.add('question-container');
			        const label = document.createElement('label');
			        label.setAttribute('for', q.id);
			        label.textContent = q.text;
			        questionContainer.appendChild(label);
			
			        const select = document.createElement('select');
			        select.id = q.id;
			        select.name = q.id;
			        select.innerHTML = '<option value="">Selecciona una opci칩n</option>' + q.options.map(option => `<option value="${option}">${option}</option>`).join('');
			        questionContainer.appendChild(select);
			
			        questionsSectionPractica.appendChild(questionContainer);
			    });
			
			
			
			    // Botones de navegaci칩n entre p치ginas
			    const next0Button = document.getElementById('next0');
			
			    const next1Button = document.getElementById('next1');
			    const back0Button = document.getElementById('back0');
			
			    const back1Button = document.getElementById('back1');
			    const next2Button = document.getElementById('next2');
			
			    const back2Button = document.getElementById('back2');
			    const next3Button = document.getElementById('next3');
			
			    const back3Button = document.getElementById('back3');
			    const next4Button = document.getElementById('next4');
			
			    const back4Button = document.getElementById('back4');
			    const next5Button = document.getElementById('next5');
			
			    const back5Button = document.getElementById('back5');
			    const next6Button = document.getElementById('next6');
			
			    const back6Button = document.getElementById('back6');
			    const next7Button = document.getElementById('next7');
			
			
			
			    const backXButton = document.getElementById('backX');
			
			
			next0Button.addEventListener('click', () => {
			// Obt칠n los campos
			const fechaField = document.getElementById('fecha'); // Reemplaza 'fecha' con el id correcto
			const areaField = document.getElementById('area');   // Reemplaza 'area' con el id correcto
			
			let camposCompletados = true; // Bandera para determinar si todos los campos est치n completos
			
			// Validar el campo de fecha
			let fechaErrorLabel = document.getElementById('error-fecha');
			if (!fechaErrorLabel) {
			    fechaErrorLabel = document.createElement('span');
			    fechaErrorLabel.id = 'error-fecha';
			    fechaErrorLabel.style.color = 'red';
			    fechaErrorLabel.style.fontSize = '0.9em';
			    fechaErrorLabel.textContent = 'Por favor, selecciona una fecha.';
			    fechaField.parentElement.appendChild(fechaErrorLabel);
			    fechaErrorLabel.style.display = 'none'; // Por defecto, oculto
			}
			if (!fechaField.value.trim()) {
			    fechaErrorLabel.style.display = 'block';
			    camposCompletados = false;
			} else {
			    fechaErrorLabel.style.display = 'none';
			}
			
			// Validar el campo de 치rea
			let areaErrorLabel = document.getElementById('error-area');
			if (!areaErrorLabel) {
			    areaErrorLabel = document.createElement('span');
			    areaErrorLabel.id = 'error-area';
			    areaErrorLabel.style.color = 'red';
			    areaErrorLabel.style.fontSize = '0.9em';
			    areaErrorLabel.textContent = 'Por favor, selecciona un 치rea v치lida.';
			    areaField.parentElement.appendChild(areaErrorLabel);
			    areaErrorLabel.style.display = 'none'; // Por defecto, oculto
			}
			if (!areaField.value.trim() || areaField.value === "Selecciona una opci칩n") {
			    areaErrorLabel.style.display = 'block';
			    camposCompletados = false;
			} else {
			    areaErrorLabel.style.display = 'none';
			}
			
			// Agregar validaci칩n en tiempo real
			fechaField.addEventListener('input', () => {
			    if (fechaField.value.trim()) {
			        fechaErrorLabel.style.display = 'none';
			    } else {
			        fechaErrorLabel.style.display = 'block';
			    }
			});
			
			areaField.addEventListener('input', () => {
			    if (areaField.value.trim() && areaField.value !== "Selecciona una opci칩n") {
			        areaErrorLabel.style.display = 'none';
			    } else {
			        areaErrorLabel.style.display = 'block';
			    }
			});
			
			// Si todos los campos est치n completos, pasar a la siguiente p치gina
			if (camposCompletados) {
			    document.getElementById('page0').classList.add('hidden');
			    document.getElementById('page1').classList.remove('hidden');
			}
			});
			
			
			
			function handleNextButton(button, calificarId, startQuestion, endQuestion, currentPageId, nextPageId) {
			button.addEventListener('click', () => {
			    const calificarElement = document.getElementById(calificarId);
			    const calificarValue = calificarElement.value.trim() || "No";
			    let preguntasCompletadas = true;
			    let calificarCompletado = true;
			
			    // Validar si la pregunta inicial est치 completada
			    let calificarErrorLabel = document.getElementById(`error-${calificarId}`);
			    if (!calificarErrorLabel) {
			        calificarErrorLabel = document.createElement('span');
			        calificarErrorLabel.id = `error-${calificarId}`;
			        calificarErrorLabel.style.color = 'red';
			        calificarErrorLabel.style.fontSize = '0.9em';
			        calificarErrorLabel.textContent = 'Por favor, seleccione una opci칩n.';
			        calificarElement.parentElement.appendChild(calificarErrorLabel);
			        calificarErrorLabel.style.display = 'none'; // Por defecto, est치 oculto
			    }
			
			    if (calificarValue === "No") {
			        calificarErrorLabel.style.display = 'none'; // Si es "No", no hay error
			    } else if (calificarValue === "S칤" && !calificarElement.value.trim()) {
			        calificarErrorLabel.style.display = 'block';
			        calificarCompletado = false;
			    } else {
			        calificarErrorLabel.style.display = 'none';
			    }
			
			    // Agregar validaci칩n en tiempo real a la pregunta inicial
			    calificarElement.addEventListener('input', () => {
			        if (calificarElement.value.trim()) {
			            calificarErrorLabel.style.display = 'none';
			        } else {
			            calificarErrorLabel.style.display = 'block';
			        }
			    });
			
			    // Validar subpreguntas si la pregunta inicial es "S칤"
			    if (calificarValue === "S칤") {
			        for (let i = startQuestion; i <= endQuestion; i++) {
			            const pregunta = document.getElementById(`question${i}`);
			            let errorLabel = document.getElementById(`error-question${i}`);
			
			            // Crear un mensaje de error si no existe
			            if (!errorLabel) {
			                errorLabel = document.createElement('span');
			                errorLabel.id = `error-question${i}`;
			                errorLabel.style.color = 'red';
			                errorLabel.style.fontSize = '0.9em';
			                errorLabel.textContent = 'Esta pregunta es obligatoria.';
			                pregunta.parentElement.appendChild(errorLabel);
			                errorLabel.style.display = 'none'; // Por defecto est치 oculto
			            }
			
			            // Mostrar o esconder el mensaje de error
			            if (!pregunta || !pregunta.value.trim()) {
			                preguntasCompletadas = false;
			                errorLabel.style.display = 'block'; // Mostrar el error si no est치 contestada
			            } else {
			                errorLabel.style.display = 'none'; // Ocultar el error si est치 contestada
			            }
			
			            // Validar en tiempo real si la pregunta es respondida
			            pregunta.addEventListener('input', () => {
			                if (pregunta.value.trim()) {
			                    errorLabel.style.display = 'none'; // Ocultar el error si se completa
			                } else {
			                    errorLabel.style.display = 'block'; // Mostrar el error si queda vac칤o
			                }
			            });
			        }
			    }
			
			    // Verificar las condiciones finales
			    if (!calificarCompletado || (calificarValue === "S칤" && !preguntasCompletadas)) {
			        return; // Detener la ejecuci칩n de la funci칩n
			    }
			
			    // Si las condiciones se cumplen, cambiar de p치gina
			    document.getElementById(currentPageId).classList.add('hidden');
			    document.getElementById(nextPageId).classList.remove('hidden');
			});
			}
			
			// Configurar los botones
			handleNextButton(next1Button, 'calificarOficinas', 1, 15, 'page1', 'page2');
			handleNextButton(next2Button, 'calificarPasillos', 16, 24, 'page2', 'page3');
			handleNextButton(next3Button, 'calificarFood', 25, 37, 'page3', 'page4');
			handleNextButton(next4Button, 'calificarBano', 38, 51, 'page4', 'page5');
			handleNextButton(next5Button, 'calificarAlrededor', 52, 57, 'page5', 'page6');
			handleNextButton(next6Button, 'calificarPractica', 58, 67, 'page6', 'page7');
			
			
			
			
			
			function handleBackButton(button, currentPageId, previousPageId) {
			button.addEventListener('click', () => {
			    document.getElementById(currentPageId).classList.add('hidden');
			    document.getElementById(previousPageId).classList.remove('hidden');
			});
			}
			
			// Configurar los botones de retroceso
			handleBackButton(back0Button, 'page1', 'page0');
			handleBackButton(back1Button, 'page2', 'page1');
			handleBackButton(back2Button, 'page3', 'page2');
			handleBackButton(back3Button, 'page4', 'page3');
			handleBackButton(back4Button, 'page5', 'page4');
			handleBackButton(back5Button, 'page6', 'page5');
			handleBackButton(back6Button, 'page7', 'page6');
			
			// Bot칩n de avanzar desde la 칰ltima p치gina
			next7Button.addEventListener('click', () => {
			document.getElementById('page7').classList.add('hidden');
			document.getElementById('pageX').classList.remove('hidden');
			});
			
			
			
			
			
			
			    <!-- P치gina X:  -->
			
			    backXButton.addEventListener('click', () => {
			        document.getElementById('pageX').classList.add('hidden');
			        document.getElementById('page7').classList.remove('hidden');
			    });
			
			
			
			
			
			    // Manejar la visibilidad de las preguntas seg칰n la respuesta
			    const calificarOficinasSelect = document.getElementById('calificarOficinas');
			    calificarOficinasSelect.addEventListener('change', () => {
			        if (calificarOficinasSelect.value === 'S칤') {
			            questionsSectionOficinas.style.display = 'block';
			        } else {
			            questionsSectionOficinas.style.display = 'none';
			        }
			    });
			
			    const calificarPasillosSelect = document.getElementById('calificarPasillos');
			    calificarPasillosSelect.addEventListener('change', () => {
			        if (calificarPasillosSelect.value === 'S칤') {
			            questionsSectionPasillos.style.display = 'block';
			        } else {
			            questionsSectionPasillos.style.display = 'none';
			        }
			    });
			
			    const calificarFoodSelect = document.getElementById('calificarFood');
			    calificarFoodSelect.addEventListener('change', () => {
			        if (calificarFoodSelect.value === 'S칤') {
			            questionsSectionFood.style.display = 'block';
			        } else {
			            questionsSectionFood.style.display = 'none';
			        }
			    });
			
			    const calificarBanoSelect = document.getElementById('calificarBano');
			    calificarBanoSelect.addEventListener('change', () => {
			        if (calificarBanoSelect.value === 'S칤') {
			            questionsSectionBano.style.display = 'block';
			        } else {
			            questionsSectionBano.style.display = 'none';
			        }
			    });
			
			    const calificarAlrededorSelect = document.getElementById('calificarAlrededor');
			    calificarAlrededorSelect.addEventListener('change', () => {
			        if (calificarAlrededorSelect.value === 'S칤') {
			            questionsSectionAlrededor.style.display = 'block';
			        } else {
			            questionsSectionAlrededor.style.display = 'none';
			        }
			    });
			
			    const calificarPracticaSelect = document.getElementById('calificarPractica');
			    calificarPracticaSelect.addEventListener('change', () => {
			        if (calificarPracticaSelect.value === 'S칤') {
			            questionsSectionPractica.style.display = 'block';
			        } else {
			            questionsSectionPractica.style.display = 'none';
			        }
			    });
			
			
			
			
			
			
			    // Manejo de im치genes y PDF (sin cambios)
			    const imageInput = document.getElementById('imageInput');
			    const preview = document.getElementById('preview');
			    const downloadPdfButton = document.getElementById('downloadPdf');
			    const images = [];
			
			    imageInput.addEventListener('change', (event) => {
			        preview.innerHTML = '';
			        images.length = 0;
			        const files = event.target.files;
			
			        if (files.length > 0) {
			            Array.from(files).forEach((file, index) => {
			                const reader = new FileReader();
			                reader.onload = (e) => {
			                    const img = document.createElement('img');
			                    img.src = e.target.result;
			
			                    const imageContainer = document.createElement('div');
			                    imageContainer.classList.add('image-container');
			                    imageContainer.appendChild(img);
			
			                    const deleteTrash = document.createElement('span');
			                    deleteTrash.classList.add('delete-trash');
			                    deleteTrash.innerHTML = '<i class="fas fa-trash"></i>';
			                    deleteTrash.addEventListener('click', () => {
			                        imageContainer.remove();
			                        images.splice(images.indexOf(e.target.result), 1);
			                    });
			
			                    imageContainer.appendChild(deleteTrash);
			                    preview.appendChild(imageContainer);
			
			                    images.push(e.target.result);
			                };
			                reader.readAsDataURL(file);
			            });
			        }
			    });
			
			
			
			// Funci칩n para generar y descargar el PDF
			downloadPdfButton.addEventListener('click', () => {
			
			// Verificar si no hay im치genes adjuntas
			if (images.length === 0) {
			    alert("Sin evidencia no hay reporte. 游뱓游땧");
			    return; // Si no hay im치genes, no contin칰a la ejecuci칩n
			}
			
			
			// Mostrar overlay de espera
			document.getElementById('overlay').style.display = 'flex';  // Mostrar el bloqueador de pantalla
			
			
			const { jsPDF } = window.jspdf;
			
			// Crear una instancia de jsPDF con tama침o carta (215.9 x 279.4 mm)
			const pdf = new jsPDF('p', 'mm', 'letter'); // 'p' = p치gina en orientaci칩n vertical, 'mm' = mil칤metros, 'letter' = tama침o carta
			
			// Definir los m치rgenes
			const margin = 10;
			
			// Obtener el tama침o de la p치gina (carta)
			const pageWidth = pdf.internal.pageSize.getWidth();
			const pageHeight = pdf.internal.pageSize.getHeight();
			
			// Inicializar la posici칩n Y
			let currentY = margin;
			
			const addQuestionAndAnswer = (question, answer) => {
			    // Ajustar la pregunta con un maxWidth para evitar que se desborde
			    const questionLines = pdf.splitTextToSize(question, pageWidth - 2 * margin);  // Dividir la pregunta si excede el ancho
			    pdf.setFont("times", "bold");
			    pdf.text(questionLines, margin, currentY);  // Usamos text con las l칤neas ajustadas
			    currentY += questionLines.length * 8;  // Aumentamos el espaciado entre la pregunta y la siguiente l칤nea (de 5 a 8)
			
			    // Ajustar la respuesta con maxWidth para que tambi칠n se ajuste en varias l칤neas
			    const answerLines = pdf.splitTextToSize(answer || 'No respondida', pageWidth - 2 * margin);  // Dividir la respuesta si excede el ancho
			    pdf.setFont("times", "normal");
			    pdf.text(answerLines, margin, currentY);  // Usamos text con las l칤neas ajustadas
			    currentY += answerLines.length * 8;  // Aumentamos el espaciado entre la respuesta y la siguiente pregunta (de 5 a 8)
			};
			
			// Portada
			pdf.setFont("times", "bold");
			pdf.setFontSize(16);  // Establecer tama침o de fuente a 16
			
			pdf.text("Reporte de Supervisi칩n", margin, currentY);
			currentY += 15;
			
			pdf.text("Proyecto: Cementera Argos", margin, currentY);
			currentY += 15;
			
			pdf.text("Nombre del Supervisor: Jeancarlo Zelaya", margin, currentY);
			currentY += 15;
			
			pdf.text("Correo: jromero@grupomacdel.com", margin, currentY);
			currentY += 15;
			
			pdf.text("Actividad: Supervisi칩n de 츼reas (Espec칤fico)", margin, currentY);
			currentY += 10;
			
			// L칤nea horizontal
			const lineWidth = 180;
			pdf.line(margin, currentY, margin + lineWidth, currentY);
			currentY += 10;  // Espacio debajo de la l칤nea
			
			pdf.text("Fecha: " + document.getElementById('fecha').value, margin, currentY);
			currentY += 15;
			
			pdf.text("츼rea a Supervisar: " + document.getElementById('area').value, margin, currentY);
			currentY += 15;
			
			// Si oficina no est치 vac칤a, agregarla
			let oficinaValue = document.getElementById('oficina').value;
			if (oficinaValue !== "") {
			    pdf.text("Oficina: " + oficinaValue, margin, currentY);
			    currentY += 15;
			}
			
			// Obtener el valor de medidas
			let medidas = document.getElementById('medidas').value.trim();

			// Eliminar solo los emoticones (usando un patr칩n m치s espec칤fico)
			medidas = medidas.replace(/[\uD83C-\uDBFF\uDC00-\uDFFF]+/g, '');

			// Solo agregar el texto de medidas si no est치 vac칤o
			if (medidas) {
    			    // A침adir t칤tulo
    			    pdf.text("Medidas tomadas en caso de una no conformidad:", margin, currentY);
    			    currentY += 10;

    			    // Cambiar la fuente a una que soporte caracteres especiales
    			    pdf.setFont("Arial", "normal"); // Arial soporta caracteres especiales

    			    // A침adir el texto de medidas con un ancho m치ximo
    			    pdf.text(medidas, margin, currentY, { maxWidth: pageWidth - 2 * margin });
    			    currentY += 20;
			} else {
    			    // Si no hay medidas, no hacer nada
    			    console.log("No hay medidas para mostrar.");
			}

			
			// Funci칩n para agregar preguntas y respuestas con ajuste de texto
			const addSection = (sectionName, questions) => {
			    pdf.addPage();
			    currentY = margin;
			    pdf.setFont("times", "bold");
			    pdf.setFontSize(12);  // Establecer tama침o de fuente a 16
			
			    pdf.text(sectionName, margin, currentY);
			
			    // L칤nea horizontal
			    const lineY = currentY + 2;
			    pdf.line(margin, lineY, pageWidth - margin, lineY);
			    currentY += 10;
			
			    questions.forEach((q) => {
			        addQuestionAndAnswer(q.text, document.getElementById(q.id).value);
			    });
			    currentY += 10;
			};
			
			// Agregar preguntas de secciones, solo si "S칤" fue seleccionado
			if (calificarOficinasSelect.value === 'S칤') addSection("Oficinas", questionsOficinas);
			if (calificarPasillosSelect.value === 'S칤') addSection("Pasillos", questionsPasillos);
			if (calificarFoodSelect.value === 'S칤') addSection("Food Court / 츼rea de Comida", questionsFood);
			if (calificarBanoSelect.value === 'S칤') addSection("Ba침os", questionsBano);
			if (calificarAlrededorSelect.value === 'S칤') addSection("Alrededores", questionsAlrededor);
			if (calificarPracticaSelect.value === 'S칤') addSection("Buenas Pr치cticas", questionsPractica);
			
			// P치gina de im치genes
			pdf.addPage();
			
			const cellWidth = (pageWidth - 2 * margin) / 3;
			const cellHeight = (pageHeight - 2 * margin) / 5;
			const spacing = 3;
			
			images.forEach((image, index) => {
			    const row = Math.floor(index / 3) % 5;
			    const col = index % 3;
			
			    const xOffset = col * cellWidth + spacing + margin;
			    const yOffset = row * cellHeight + spacing + margin;
			
			    const img = new Image();
			    img.src = image;
			    img.onload = () => {
			        let imgWidth = img.width;
			        let imgHeight = img.height;
			        let scale = Math.min((cellWidth - spacing) / imgWidth, (cellHeight - spacing) / imgHeight);
			        let newWidth = imgWidth * scale;
			        let newHeight = imgHeight * scale;
			
			        const xCentered = xOffset + (cellWidth - newWidth) / 2;
			        const yCentered = yOffset + (cellHeight - newHeight) / 2;
			
			        // Convertir la imagen a base64 con un nivel de compresi칩n
			        const canvas = document.createElement('canvas');
			        const ctx = canvas.getContext('2d');
			        canvas.width = imgWidth;
			        canvas.height = imgHeight;
			        ctx.drawImage(img, 0, 0, imgWidth, imgHeight);
			
			        // Comprimir imagen
			        const compressedImage = canvas.toDataURL('image/jpeg', 0.1);
			
			        // Agregar imagen comprimida al PDF
			        pdf.addImage(compressedImage, 'JPEG', xCentered, yCentered, newWidth, newHeight);
			
			        // Nueva p치gina despu칠s de 15 im치genes
			        if ((index + 1) % 15 === 0 && index + 1 < images.length) {
			            pdf.addPage();
			        }
			
			        if (index === images.length - 1) {
			            // Obtener los elementos de fecha, 치rea y oficina
			            let fecha = document.getElementById('fecha').value;
			            let area = document.getElementById('area').value;
			            let oficina = document.getElementById('oficina').value;
			
			            let nombreArchivo = `${fecha} - Reporte de Supervisi칩n - ${area}`;
			
			            if (area === "Administraci칩n" && oficina) {
			                nombreArchivo += ` - ${oficina}`;
			            }
			
			            nombreArchivo += ".pdf";
			
			            // Descargar PDF
			            pdf.save(nombreArchivo);
			
			// Ocultar el overlay de espera
			            document.getElementById('overlay').style.display = 'none';  // Ocultar el bloqueador de pantalla
			
			        }
			    };
			});
			});
			
		</script>
	</body>
</html>
